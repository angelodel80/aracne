<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml" data-template="templates:surround" data-template-with="templates/page.html" data-template-at="content">
    <section class="content-header">
        <h1>Manage an editor</h1>
        <span data-template="mainapp:check-username"/>
    </section>
    <style>
        .owner_dba{
            border:1px solid red;
        }
    </style>
    <section id="editors" class="content">
        <p class="lead"> Assign one or more collections to the editor <strong>
                <span data-template="mainapp:get-username"/>
            </strong>
        </p> 
<!--div data-template="app:assign-to"/-->
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="#user" data-toggle="tab">Assigned to the editor</a>
            </li>
            <li>
                <a href="#others" data-toggle="tab">Assigned to other editors</a>
            </li>
            <li>
                <a href="#free" data-toggle="tab">Un-assigned</a>
            </li>
        </ul>
        <div class="tab-content clearfix">
            <div class="tab-pane active" id="user">
                <table id="assigned-to-user" data-page-length="50" data-order="[[ 1, &#34;asc&#34; ]]" class="table table-striped">
                    <thead>
                        <tr>
                            <th>id</th>
                            <th>Title</th>
                            <th/>
                            
                            <!--th>Owner</th>
                            <th>Group</th>
                            <th>Mode</th-->
                        </tr>
                    </thead>
                    <tbody data-template="adminapp:assigned-to-user"/>
                </table>
            </div>
            <div class="tab-pane" id="others">
                <table id="assigned-to-others" data-page-length="50" data-order="[[ 1, &#34;asc&#34; ]]" class="table table-striped">
                    <thead>
                        <tr>
                            <th/>
                            <th>id</th>
                            <th>Title</th>
                            <th>Owner</th>
                            <th/>
                        </tr>
                    </thead>
                    <tbody data-template="adminapp:assigned-to-others"/>
                </table>
            </div>
            <div class="tab-pane" id="free">
                <table id="assigned-free" data-page-length="50" data-order="[[ 1, &#34;asc&#34; ]]" class="table table-striped">
                    <thead>
                        <tr>
                            <th/>
                            <th>id</th>
                            <th>Title</th>
                            <th/>
                            <!--th>Owner</th>
                            <th>Group</th>
                            <th>Mode</th-->
                        </tr>
                    </thead>
                    <tbody data-template="adminapp:assigned-free"/>
                </table>
                <div id="res"/>
            </div>
        </div>
        
        <!--table id="assegnazioni" data-page-length="50" data-order="[[ 1, "asc" ]]" class="table table-striped">
        <thead>
            <tr>
                <th/>
                <th>id</th>
                <th>Titolo</th>
                <th>Owner</th>
                <th>Group</th>
                <th>Mode</th>
            </tr>
        </thead>            
                <tbody data-template="app:assign-collection"/>
            </table-->
    </section>
    <script>
    $(document).ready(function() {
    $('input[type=checkbox]').click(function(){
        if ($(this).is(':checked')) {
            $('#assigned-to-others, #assigned-free').find('button').prop('disabled',true);
            $('input[type=checkbox]').prop('checked',false);
            $(this).prop('checked',true);
            $(this).parents("tr").find('button').prop('disabled',false);//.find('button').removeAttr('disabled');
           
        } else {
            $(this).parents("tr").find('button').prop('disabled',true);
             //$(this).parents("form").find('button').attr('disabled', 'disabled');
        }
        //$(this).parents("form").find('button').removeAttr('disabled');
        //$('#submit').attr('disabled', !$(this).attr('checked'));
        //alert('hello')
    });    
        
        
    $('#assigned-free').DataTable( {
        columnDefs: [ {
            orderable: false,
            searchable: false,
            className: 'select-checkbox',
            targets:   0,
            },
            { type: 'natural-nohtml', targets: 1 }, 
            {orderable: false, searchable: false, targets: 3} 
        ],
    } );
} );
    </script>
</div>